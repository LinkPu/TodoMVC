{"remainingRequest":"/home/jarvis/coding/gitlab/training15-todo-mvc/todo-mvc/frontend/node_modules/babel-loader/lib/index.js!/home/jarvis/coding/gitlab/training15-todo-mvc/todo-mvc/frontend/node_modules/eslint-loader/index.js??ref--13-0!/home/jarvis/coding/gitlab/training15-todo-mvc/todo-mvc/frontend/src/services/http.js","dependencies":[{"path":"/home/jarvis/coding/gitlab/training15-todo-mvc/todo-mvc/frontend/src/services/http.js","mtime":1576475339855},{"path":"/home/jarvis/coding/gitlab/training15-todo-mvc/todo-mvc/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1575507633447},{"path":"/home/jarvis/coding/gitlab/training15-todo-mvc/todo-mvc/frontend/node_modules/babel-loader/lib/index.js","mtime":1575507633650},{"path":"/home/jarvis/coding/gitlab/training15-todo-mvc/todo-mvc/frontend/node_modules/eslint-loader/index.js","mtime":1575507635626}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsgLy8gYXhpb3Mg6YWN572uCgpheGlvcy5kZWZhdWx0cy50aW1lb3V0ID0gNTAwMDsKYXhpb3MuZGVmYXVsdHMuYmFzZVVSTCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODAiOwpheGlvcy5kZWZhdWx0cy5oZWFkZXJzLnBvc3RbIkNvbnRlbnQtVHlwZSJdID0gImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCI7CgpmdW5jdGlvbiBnZXRDb29raWUobmFtZSkgewogIHZhciByZWcgPSBuZXcgUmVnRXhwKCIoXnwgKSIgKyBuYW1lICsgIj0oW147XSopKDt8JCkiKTsKICB2YXIgYXJyID0gZG9jdW1lbnQuY29va2llLm1hdGNoKHJlZyk7CgogIGlmIChhcnIpIHsKICAgIHJldHVybiBhcnJbMl07CiAgfSBlbHNlIHsKICAgIHJldHVybiBudWxsOwogIH0KfQoKYXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKHJlcXVlc3QgPT4gewogIHZhciBhY2Nlc3NUb2tlbiA9IGdldENvb2tpZSgiYWNjZXNzVG9rZW4iKTsKICB2YXIgdXNlcklkID0gZ2V0Q29va2llKCJ1c2VySWQiKTsKCiAgaWYgKGFjY2Vzc1Rva2VuICYmIHVzZXJJZCkgewogICAgcmVxdWVzdC51cmwgKz0gIj9hY2Nlc3NUb2tlbj0iICsgYWNjZXNzVG9rZW4gKyAiJnVzZXJJZD0iICsgdXNlcklkOwogIH0KCiAgcmV0dXJuIHJlcXVlc3Q7Cn0sIGVyciA9PiB7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7Cn0pOwpheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKHJlc3BvbnNlID0+IHsKICByZXR1cm4gcmVzcG9uc2U7Cn0sIGVycm9yID0+IHsKICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgIHN3aXRjaCAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzKSB7CiAgICAgIGNhc2UgNDAxOgogICAgfQogIH0KCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IGF4aW9zOw=="},{"version":3,"sources":["/home/jarvis/coding/gitlab/training15-todo-mvc/todo-mvc/frontend/src/services/http.js"],"names":["axios","defaults","timeout","baseURL","headers","post","getCookie","name","reg","RegExp","arr","document","cookie","match","interceptors","request","use","accessToken","userId","url","err","Promise","reject","response","error","status"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CAEA;;AACAA,KAAK,CAACC,QAAN,CAAeC,OAAf,GAAyB,IAAzB;AACAF,KAAK,CAACC,QAAN,CAAeE,OAAf,GAAyB,uBAAzB;AACAH,KAAK,CAACC,QAAN,CAAeG,OAAf,CAAuBC,IAAvB,CAA4B,cAA5B,IAA8C,mCAA9C;;AAEA,SAASC,SAAT,CAAmBC,IAAnB,EAAyB;AACvB,MAAIC,GAAG,GAAG,IAAIC,MAAJ,CAAW,UAAUF,IAAV,GAAiB,eAA5B,CAAV;AACA,MAAIG,GAAG,GAAGC,QAAQ,CAACC,MAAT,CAAgBC,KAAhB,CAAsBL,GAAtB,CAAV;;AACA,MAAIE,GAAJ,EAAS;AACP,WAAOA,GAAG,CAAC,CAAD,CAAV;AACD,GAFD,MAEO;AACL,WAAO,IAAP;AACD;AACF;;AAEDV,KAAK,CAACc,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACED,OAAO,IAAI;AACT,MAAIE,WAAW,GAAGX,SAAS,CAAC,aAAD,CAA3B;AACA,MAAIY,MAAM,GAAGZ,SAAS,CAAC,QAAD,CAAtB;;AACA,MAAIW,WAAW,IAAIC,MAAnB,EAA2B;AACzBH,IAAAA,OAAO,CAACI,GAAR,IAAe,kBAAkBF,WAAlB,GAAgC,UAAhC,GAA6CC,MAA5D;AACD;;AACD,SAAOH,OAAP;AACD,CARH,EASEK,GAAG,IAAI;AACL,SAAOC,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;AACD,CAXH;AAcApB,KAAK,CAACc,YAAN,CAAmBS,QAAnB,CAA4BP,GAA5B,CACEO,QAAQ,IAAI;AACV,SAAOA,QAAP;AACD,CAHH,EAIEC,KAAK,IAAI;AACP,MAAIA,KAAK,CAACD,QAAV,EAAoB;AAClB,YAAQC,KAAK,CAACD,QAAN,CAAeE,MAAvB;AACE,WAAK,GAAL;AADF;AAGD;;AACD,SAAOJ,OAAO,CAACC,MAAR,CAAeE,KAAf,CAAP;AACH,CAXD;AAYA,eAAexB,KAAf","sourcesContent":["import axios from \"axios\"\n\n// axios 配置\naxios.defaults.timeout = 5000;\naxios.defaults.baseURL = \"http://localhost:8080\";\naxios.defaults.headers.post[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n\nfunction getCookie(name) {\n  var reg = new RegExp(\"(^| )\" + name + \"=([^;]*)(;|$)\");\n  var arr = document.cookie.match(reg);\n  if (arr) {\n    return arr[2];\n  } else {\n    return null;\n  }\n}\n\naxios.interceptors.request.use(\n  request => {\n    var accessToken = getCookie(\"accessToken\");\n    var userId = getCookie(\"userId\")\n    if (accessToken && userId) {\n      request.url += \"?accessToken=\" + accessToken + \"&userId=\" + userId;\n    }\n    return request;\n  },\n  err => {\n    return Promise.reject(err);\n  }\n);\n\naxios.interceptors.response.use(\n  response => {\n    return response;\n  },\n  error => {\n    if (error.response) {\n      switch (error.response.status) {\n        case 401:\n      }\n    }\n    return Promise.reject(error)\n});\nexport default axios;\n"]}]}